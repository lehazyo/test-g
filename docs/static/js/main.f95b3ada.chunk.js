(this["webpackJsonptest-g"]=this["webpackJsonptest-g"]||[]).push([[0],{17:function(e,t,i){},19:function(e,t,i){},20:function(e,t,i){},21:function(e,t,i){},22:function(e,t,i){"use strict";i.r(t);var r=i(0),n=i.n(r),a=i(5),l=i.n(a),u=i(11),c=i(9),s=i(10),f=i(1),o=function(){function e(t){Object(c.a)(this,e),this.relief=[],this.reliefHeight=null,this.ob=Object(f.m)({waterCount:0,configurationIsValid:!1,waterCubesArray:[]}),this.setRelief("[".concat(t.initialRelief.toString(),"]"))}return Object(s.a)(e,[{key:"getRelief",value:function(){return this.relief}},{key:"getWidth",value:function(){return this.relief.length}},{key:"getHeight",value:function(){return null===this.reliefHeight&&(this.reliefHeight=Math.max.apply(Math,Object(u.a)(this.relief))),this.reliefHeight}},{key:"setRelief",value:function(e){var t=this,i=/^\[ *(\d+( *, *\d+)*) *\]$/.test(e);if(Object(f.n)((function(){t.ob.configurationIsValid=i})),i){var r=e.match(/\d+/g);null!==r&&(this.relief=r.map((function(e){return parseInt(e)})),this.reliefHeight=null,this.makeWaterCubesArray())}}},{key:"makeIndexesByHeight",value:function(){var e={};return this.relief.forEach((function(t,i){void 0===e[t]&&(e[t]=[]),e[t].push(i)})),e}},{key:"sortNumerically",value:function(e){e.sort((function(e,t){return e>t?1:e<t?-1:0}))}},{key:"makeSortedHeightsList",value:function(e){var t=Object.keys(e).map((function(e){return parseInt(e)}));return this.sortNumerically(t),t=t.reverse()}},{key:"makeWaterCubesArray",value:function(){for(var e=this,t=Array(this.relief.length).fill(null),i=this.makeIndexesByHeight(),r=this.makeSortedHeightsList(i),n=0,a=[],l=0;l<r.length;l++){var u=r[l];if(!u){i[0].forEach((function(e){null===t[e]&&(t[e]=[0,0])}));break}var c=i[u];if(a.length&&(c=c.concat(a)),c.length<2&&u>1)a=c,null===t[c[0]]&&(t[c[0]]=[0,u]);else{this.sortNumerically(c);for(var s=c[c.length-1],o=c[0];o<=s;o++)if(null===t[o]){var h=u-this.relief[o];n+=h,t[o]=[h,this.relief[o]]}a.length?(a=[],l--):a=[c[0]]}}Object(f.n)((function(){e.ob.waterCount=n,e.ob.waterCubesArray=t}))}},{key:"getWaterCubesArray",value:function(){return this.ob.waterCubesArray}},{key:"getWaterCount",value:function(){return this.ob.waterCount}},{key:"getConfigurationIsValid",value:function(){return this.ob.configurationIsValid}}]),e}(),h=i(7),b=(i(17),i(2)),g=Object(h.a)((function(e){var t=e.initialRelief,i=Object(r.useContext)(m),n=Object(r.useRef)(null),a=i.getConfigurationIsValid()?Object(b.jsxs)("span",{className:"relief-input-water-label relief-right-most-label",children:["has water volume ",i.getWaterCount()]}):Object(b.jsx)("span",{className:"relief-input-wrong-config relief-right-most-label",children:"is invalid"});return Object(b.jsx)("div",{className:"relief-input-panel",children:Object(b.jsxs)("div",{className:"relief-input-wrapper",children:[Object(b.jsx)("span",{className:"relief-input-config-label",children:"Configuration"}),Object(b.jsx)("input",{className:"relief-input",type:"text",ref:n,onChange:function(){var e,t=null===(e=n.current)||void 0===e?void 0:e.value;void 0!==t&&i.setRelief(t)},defaultValue:"[".concat(t.toString(),"]")}),a]})})})),d=i(4),j=function(e){var t=e.height,i=e.widthPx,n=e.heightPx,a=e.cellSize,l=e.waterCubesArray,u=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=function(){if(null!==u.current){var e=u.current.getContext("2d");if(null!==e){var r={base:"#666",border:"#999",air:"#fff",cube:"#fd7",water:"#aaf"};e.clearRect(0,0,i,n),e.fillStyle=r.border,e.fillRect(0,0,i,n),l.forEach((function(i,n){for(var l,u=i[0],c=i[1],s=t-u-c,f=0;f<t;f++)l=f+1>s+u?"cube":f+1>s?"water":"air",e.fillStyle=r[l],e.fillRect(1+n*(1+a),1+f*(1+a),a,a);e.fillStyle=r.base,e.fillRect(1+n*(1+a),1+t*(1+a),a,a)}))}}};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[a,t,i,n,l]),Object(b.jsx)("canvas",{className:"squares-graph",width:i,height:n,ref:u})},v=(i(19),Object(h.a)((function(){var e=Object(r.useRef)(null),t=Object(r.useState)(0),i=Object(d.a)(t,2),n=i[0],a=i[1],l=Object(r.useState)(0),u=Object(d.a)(l,2),c=u[0],s=u[1],f=Object(r.useState)(0),o=Object(d.a)(f,2),h=o[0],g=o[1],v=Object(r.useContext)(m),O=v.getWaterCubesArray();return Object(r.useEffect)((function(){var t=function(){if(null!==e.current){var t=function(e,t,i,r){var n=Math.floor((i-20)/e),a=Math.floor((r-20)/(t+1)),l=Math.min(n,a);return(l-=1)<2&&(l=2),l>30&&(l=30),[l,e*l+1*e+1,(t+1)*l+1*(t+1)+1]}(v.getWidth(),v.getHeight(),e.current.clientWidth,e.current.clientHeight),i=Object(d.a)(t,3),r=i[0],n=i[1],l=i[2];a(r),s(n),g(l)}};return t(),window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[O]),Object(b.jsx)("div",{ref:e,className:"squares-container",children:Object(b.jsx)(j,{widthPx:c,heightPx:h,height:v.getHeight(),cellSize:n,waterCubesArray:O})})}))),O=(i(20),i(21),[18,29,22,46,42,33,30,49,3,18,20,13,7,19,35,23,29,45,36,1,4,36,11,16,4,47,39,26,12,4,2,36,13,0,17,29,15,24,38,4,20,28,15,43,14,42,45,50,31,47,33,46,6,32,47,25,33,9,39,35,0,41,24,34]),y=new o({initialRelief:O}),m=Object(r.createContext)(y),p=function(){return Object(b.jsx)(m.Provider,{value:y,children:Object(b.jsxs)("div",{className:"aquarium-wrapper",children:[Object(b.jsx)(g,{initialRelief:O}),Object(b.jsx)(v,{})]})})};l.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.f95b3ada.chunk.js.map